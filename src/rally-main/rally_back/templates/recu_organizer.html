<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Reçu de Paiement - Rally</title>
</head>
<body style="font-family: Arial, sans-serif; background-color: #f5f5f5; padding: 30px; color: #1E293B;">
  <div style="max-width: 700px; margin: auto; background: #ffffff; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); overflow: hidden;">

    <!-- Header -->
    <div style="background-color: #0F172A; padding: 24px;">
      <h1 style="margin: 0; color: #F7FAF6; font-size: 24px;">Reçu de Paiement</h1>
    </div>

    <!-- Main Content -->
    <div style="padding: 32px;">
      <p style="margin: 0 0 8px;"><strong>Date :</strong> {{ payment.created_at.strftime('%d/%m/%Y') }}</p>
      <p style="margin: 0 0 8px;"><strong>Payé à :</strong> {{ payment.organizer_email }}</p>

      <table style="margin-top: 24px; width: 100%; border-collapse: collapse;">
        <tr>
          <td style="padding: 10px; font-weight: 600;">Événement :</td>
          <td style="padding: 10px;">{{ payment.event_title }}</td>
        </tr>
        <tr style="background-color: #F8FAFC;">
          <td style="padding: 10px; font-weight: 600;">Email acheteur :</td>
          <td style="padding: 10px;">{{ payment.buyer_email }}</td>
        </tr>
        <tr>
          <td style="padding: 10px; font-weight: 600;">ID Stripe :</td>
          <td style="padding: 10px;">{{ payment.stripe_payment_intent_id or 'N/A' }}</td>
        </tr>
      </table>

      <table style="margin-top: 30px; width: 100%; border-top: 1px solid #E2E8F0; border-collapse: collapse;">
        <tr>
          <td style="padding: 12px 10px;"><strong>Montant brut :</strong></td>
          <td style="padding: 12px 10px; text-align: right;">{{ "%.2f"|format(payment.brut_amount) }} €</td>
        </tr>
        <tr style="background-color: #F8FAFC;">
          <td style="padding: 12px 10px;"><strong>Frais :</strong></td>
          <td style="padding: 12px 10px; text-align: right;">- {{ "%.2f"|format(payment.fee) }} €</td>
        </tr>
        <tr>
          <td style="padding: 12px 10px;"><strong>Montant reçu :</strong></td>
          <td style="padding: 12px 10px; text-align: right; font-weight: 700;">{{ "%.2f"|format(payment.amount) }} €</td>
        </tr>
      </table>

      <p style="margin-top: 40px; font-size: 14px; color: #64748B;">
        Ce paiement vous a été transféré par Rally via Stripe.<br />
        – L’équipe Rally
      </p>
    </div>
  </div>
</body>
</html>
